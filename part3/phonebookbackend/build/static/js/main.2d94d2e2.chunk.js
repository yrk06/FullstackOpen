(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(2),r=t(16),s=t.n(r),u=t(17),o=t(3),a=t(4),i=t.n(a),l="/api/persons",b=function(e){return new Promise((function(n,t){i.a.post(l,e).then((function(e){return n(e.data)})).catch((function(e){return t(e.response.data)}))}))},d=function(e){return i.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},j=function(){return i.a.get(l).then((function(e){return e.data}))},f=function(e){return new Promise((function(n,t){i.a.put("".concat(l,"/").concat(e.id),e).then((function(e){return n(e.data)})).catch((function(e){return t(e.response.data)}))}))},m=t(0),h=function(e){var n=e.filterName,t=e.setFilterName;return Object(m.jsxs)("div",{children:["Filter by: ",Object(m.jsx)("input",{value:n,onChange:function(e){t(e.target.value)}})]})},O=function(e){var n=e.newName,t=e.setNewName,c=e.newNumber,r=e.setNewNumber,s=e.submitNewPerson;return Object(m.jsxs)("form",{onSubmit:s,children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:n,onChange:function(e){t(e.target.value)}})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{value:c,onChange:function(e){r(e.target.value)}})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})},w=function(e){var n=e.person,t=e.deletePerson;return Object(m.jsxs)("li",{children:[n.name," ",n.number," ",Object(m.jsx)("button",{onClick:function(){return t(n)},children:"Delete"})]})},p=function(e){var n=e.persons,t=e.deletePerson;return Object(m.jsx)("ul",{children:n.map((function(e){return Object(m.jsx)(w,{person:e,deletePerson:t},e.name)}))})},v=(t(41),function(e){var n=e.message;return null===n?null:void 0!==n.error?Object(m.jsx)("div",{className:"error",children:n.error}):void 0!==n.success?Object(m.jsx)("div",{className:"success",children:n.success}):null}),x=function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],s=Object(c.useState)(""),a=Object(o.a)(s,2),i=a[0],l=a[1],w=Object(c.useState)(""),x=Object(o.a)(w,2),N=x[0],g=x[1],C=Object(c.useState)(""),y=Object(o.a)(C,2),P=y[0],k=y[1],L=Object(c.useState)(null),S=Object(o.a)(L,2),F=S[0],A=S[1];Object(c.useEffect)((function(){j().then((function(e){r(e)}))}),[]);var D=t.filter((function(e){return e.name.toLowerCase().includes(P.toLowerCase())}));return Object(m.jsxs)("div",{children:[Object(m.jsx)(v,{message:F}),Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(h,{filterName:P,setFilterName:k}),Object(m.jsx)("h3",{children:"Add a new"}),Object(m.jsx)(O,{newName:i,setNewName:l,newNumber:N,setNewNumber:g,submitNewPerson:function(e){if(e.preventDefault(),t.filter((function(e){return e.name.toLowerCase()===i.toLowerCase()})).length>0){if(window.confirm("".concat(i," is already on the book, replace the current number?"))){var n=Object(u.a)({},t.filter((function(e){return e.name.toLowerCase()===i.toLowerCase()}))[0]);n.number=N,f(n).then((function(e){r(t.map((function(t){return t.id!==n.id?t:e}))),A({success:"".concat(e.name," was updated successfully")})})).catch((function(e){A(e)}))}}else b({name:i,number:N}).then((function(e){r(t.concat(e)),A({success:"".concat(e.name," was added successfully")})})).catch((function(e){A(e)}))}}),Object(m.jsx)("h2",{children:"Numbers"}),Object(m.jsx)(p,{persons:D,deletePerson:function(e){window.confirm("Are you sure you want to delete ".concat(e.name," from the book?"))&&d(e.id).then((function(){r(t.filter((function(n){return n.id!==e.id}))),A({success:"".concat(e.name," was deleted successfully")})}))}})]})};s.a.render(Object(m.jsx)(x,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.2d94d2e2.chunk.js.map